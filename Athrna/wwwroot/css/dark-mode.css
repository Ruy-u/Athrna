/* Enhanced Dark Mode CSS with improved support for City Site pages */

/* Light mode (default) */
:root {
    --bg-color: #ffffff;
    --text-color: #333333;
    --header-bg: #1a3b29;
    --header-text: #ffffff;
    --card-bg: #ffffff;
    --card-border: #dee2e6;
    --secondary-bg: #f8f9fa;
    --accent-color: #1a3b29;
    --muted-text: #6c757d;
    --link-color: #0d6efd;
    --button-primary-bg: #1a3b29;
    --button-primary-text: #ffffff;
    --button-secondary-bg: #6c757d;
    --button-secondary-text: #ffffff;
    --input-bg: #ffffff;
    --input-border: #ced4da;
    --footer-bg: #f8f9fa;
    --footer-text: #6c757d;
    --map-bg: #f8f9fa;
    --map-border: #dee2e6;
    --site-card-bg: #ffffff;
    --site-card-text: #333333;
    --site-card-shadow: rgba(0, 0, 0, 0.1);
    --site-meta-text: #ffffff;
    --site-sidebar-bg: #ffffff;
    --site-sidebar-text: #333333;
    --site-widget-header-bg: #f8f9fa;
    --site-rating-star: #f8c15c;
    --site-card-hover-shadow: rgba(0, 0, 0, 0.15);
}

/* Dark mode variables */
[data-theme="dark"] {
    --bg-color: #121212;
    --text-color: #e0e0e0;
    --header-bg: #0e1e16; /* Darker version of the original green */
    --header-text: #ffffff;
    --card-bg: #1e1e1e;
    --card-border: #333333;
    --secondary-bg: #2d2d2d;
    --accent-color: #2c5f46; /* Lighter version of the green for better visibility */
    --muted-text: #a0a0a0;
    --link-color: #63b3ed;
    --button-primary-bg: #2c5f46;
    --button-primary-text: #ffffff;
    --button-secondary-bg: #4a4a4a;
    --button-secondary-text: #ffffff;
    --input-bg: #2d2d2d;
    --input-border: #444444;
    --footer-bg: #1a1a1a;
    --footer-text: #a0a0a0;
    --map-bg: #1e1e1e;
    --map-border: #333333;
    --site-card-bg: #1e1e1e;
    --site-card-text: #e0e0e0;
    --site-card-shadow: rgba(0, 0, 0, 0.3);
    --site-meta-text: #ffffff;
    --site-sidebar-bg: #1e1e1e;
    --site-sidebar-text: #e0e0e0;
    --site-widget-header-bg: #2d2d2d;
    --site-rating-star: #f8c15c;
    --site-card-hover-shadow: rgba(0, 0, 0, 0.5);
}

    /* Core element styles */
    [data-theme="dark"] body {
        background-color: var(--bg-color) !important;
        color: var(--text-color) !important;
    }

    [data-theme="dark"] main {
        background-color: var(--bg-color) !important;
        color: var(--text-color) !important;
    }

    /* Header styles */
    [data-theme="dark"] header {
        background-color: var(--header-bg) !important;
        color: var(--header-text) !important;
    }

    /* Global card styles */
    [data-theme="dark"] .card,
    [data-theme="dark"] .dashboard-widget,
    [data-theme="dark"] .bookmark-card,
    [data-theme="dark"] .guide-card,
    [data-theme="dark"] .rating-item,
    [data-theme="dark"] .bookmark-item,
    [data-theme="dark"] .stat-card,
    [data-theme="dark"] .site-description-section,
    [data-theme="dark"] .sidebar-widget,
    [data-theme="dark"] div.card,
    [data-theme="dark"] .card-content {
        background-color: var(--card-bg) !important;
        border-color: var(--card-border) !important;
        color: var(--text-color) !important;
        box-shadow: 0 2px 5px rgba(0, 0, 0, 0.3) !important;
    }

    /* City/Site specific elements */
    [data-theme="dark"] .site-card {
        background-color: var(--site-card-bg) !important;
        border-color: var(--card-border) !important;
        color: var(--site-card-text) !important;
        box-shadow: 0 4px 6px var(--site-card-shadow) !important;
    }

        [data-theme="dark"] .site-card:hover {
            box-shadow: 0 10px 20px var(--site-card-hover-shadow) !important;
        }

    [data-theme="dark"] .site-meta {
        background-color: var(--site-meta-bg) !important;
        color: var(--site-meta-text) !important;
    }

    [data-theme="dark"] .site-hero .container {
        color: var(--site-meta-text) !important;
    }

    [data-theme="dark"] .site-title {
        color: var(--site-meta-text) !important;
    }

    [data-theme="dark"] .site-sidebar {
        background-color: var(--site-sidebar-bg) !important;
        color: var(--site-sidebar-text) !important;
    }

    [data-theme="dark"] .sidebar-widget h4 {
        color: var(--text-color) !important;
        border-color: var(--card-border) !important;
    }

    [data-theme="dark"] .site-info h5,
    [data-theme="dark"] .card-header h6 {
        color: var(--text-color) !important;
    }

    /* Service items */
    [data-theme="dark"] .service-item {
        background-color: var(--secondary-bg) !important;
        border-color: var(--card-border) !important;
    }

        [data-theme="dark"] .service-item:hover {
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3) !important;
        }

    [data-theme="dark"] .service-icon {
        color: var(--accent-color) !important;
    }

    [data-theme="dark"] .service-details h4 {
        color: var(--text-color) !important;
    }

    [data-theme="dark"] .service-details p {
        color: var(--muted-text) !important;
    }

    /* Guide profiles */
    [data-theme="dark"] .guide-profile {
        background-color: var(--secondary-bg) !important;
    }

        [data-theme="dark"] .guide-profile:hover {
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3) !important;
        }

    [data-theme="dark"] .guide-info h4 {
        color: var(--text-color) !important;
    }

    [data-theme="dark"] .guide-details {
        color: var(--muted-text) !important;
    }

    /* Ratings section */
    [data-theme="dark"] .rating-summary {
        background-color: var(--secondary-bg) !important;
        border-color: var(--card-border) !important;
    }

    [data-theme="dark"] .rating-value {
        color: var(--text-color) !important;
    }

    [data-theme="dark"] .stars,
    [data-theme="dark"] .review-stars,
    [data-theme="dark"] .rating-stars {
        color: var(--site-rating-star) !important;
    }

    [data-theme="dark"] .rating-count,
    [data-theme="dark"] .rating-label {
        color: var(--muted-text) !important;
    }

    [data-theme="dark"] .review-item {
        border-color: var(--card-border) !important;
    }

    [data-theme="dark"] .reviewer-name {
        color: var(--text-color) !important;
    }

    [data-theme="dark"] .review-text {
        color: var(--muted-text) !important;
    }

    /* Lists and tables */
    [data-theme="dark"] .nearby-sites li,
    [data-theme="dark"] .hours-list li,
    [data-theme="dark"] .fees-list li {
        border-color: var(--card-border) !important;
        color: var(--text-color) !important;
    }

    [data-theme="dark"] .site-type-badge {
        background-color: var(--accent-color) !important;
        color: var(--site-meta-text) !important;
    }

    /* Location map */
    [data-theme="dark"] .site-location-map {
        border-color: var(--card-border) !important;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.3) !important;
    }

    /* City header */
    [data-theme="dark"] .city-header {
        background-color: rgba(0, 0, 0, 0.7) !important;
    }

    [data-theme="dark"] .city-overlay {
        background-color: rgba(0, 0, 0, 0.6) !important;
    }

    [data-theme="dark"] .city-header h1,
    [data-theme="dark"] .city-header p {
        color: var(--site-meta-text) !important;
    }

    /* Buttons */
    [data-theme="dark"] .btn-primary {
        background-color: var(--button-primary-bg) !important;
        border-color: var(--button-primary-bg) !important;
        color: var(--button-primary-text) !important;
    }

    [data-theme="dark"] .btn-outline-primary {
        border-color: var(--accent-color) !important;
        color: var(--accent-color) !important;
    }

        [data-theme="dark"] .btn-outline-primary:hover {
            background-color: var(--accent-color) !important;
            color: var(--button-primary-text) !important;
        }

    /* Rating input */
    [data-theme="dark"] .rating-stars label {
        color: #555 !important;
    }

        [data-theme="dark"] .rating-stars input:checked ~ label,
        [data-theme="dark"] .rating-stars label:hover,
        [data-theme="dark"] .rating-stars label:hover ~ label {
            color: var(--site-rating-star) !important;
        }

    /* Force text colors */
    [data-theme="dark"] h1,
    [data-theme="dark"] h2,
    [data-theme="dark"] h3,
    [data-theme="dark"] h4,
    [data-theme="dark"] h5,
    [data-theme="dark"] h6,
    [data-theme="dark"] p,
    [data-theme="dark"] span:not(.badge):not(.site-type):not([class*="text-"]),
    [data-theme="dark"] li,
    [data-theme="dark"] label,
    [data-theme="dark"] .site-description,
    [data-theme="dark"] .cultural-info {
        color: var(--text-color) !important;
    }

    /* Fix forms in dark mode */
    [data-theme="dark"] input[type="text"],
    [data-theme="dark"] input[type="email"],
    [data-theme="dark"] input[type="password"],
    [data-theme="dark"] select,
    [data-theme="dark"] textarea {
        background-color: var(--input-bg) !important;
        border-color: var(--input-border) !important;
        color: var(--text-color) !important;
    }

    /* Fix cards in dark mode - ensure all content is properly colored */
    [data-theme="dark"] .card *,
    [data-theme="dark"] .site-description-section *,
    [data-theme="dark"] .sidebar-widget * {
        color: var(--text-color) !important;
    }

    /* Override for special elements that should have different colors */
    [data-theme="dark"] .card .text-muted,
    [data-theme="dark"] .site-description-section .text-muted,
    [data-theme="dark"] .sidebar-widget .text-muted {
        color: var(--muted-text) !important;
    }

    [data-theme="dark"] .card .stars *,
    [data-theme="dark"] .card .rating-stars *,
    [data-theme="dark"] .card .review-stars * {
        color: var(--site-rating-star) !important;
    }

    [data-theme="dark"] .btn-primary *,
    [data-theme="dark"] .btn-outline-primary:hover * {
        color: var(--button-primary-text) !important;
    }

/* Dark mode toggle button styles */
.dark-mode-toggle {
    background: transparent;
    border: none;
    color: var(--header-text);
    cursor: pointer;
    font-size: 1.2rem;
    margin-left: 10px;
    display: flex;
    align-items: center;
    padding: 0.25rem 0.5rem;
    border-radius: 4px;
}

    .dark-mode-toggle:hover {
        background-color: rgba(255, 255, 255, 0.1);
    }

    .dark-mode-toggle .bi {
        font-size: 1.2rem;
    }

/* Transition effects */
body,
.card,
.dashboard-widget,
.form-control,
.btn,
a,
.site-card,
.service-item,
.guide-profile,
.site-sidebar,
.sidebar-widget {
    transition: background-color 0.3s ease, color 0.3s ease, border-color 0.3s ease, box-shadow 0.3s ease;
}

/* Fix for inputs in dark mode */
[data-theme="dark"] input:-webkit-autofill,
[data-theme="dark"] input:-webkit-autofill:hover,
[data-theme="dark"] input:-webkit-autofill:focus,
[data-theme="dark"] textarea:-webkit-autofill,
[data-theme="dark"] textarea:-webkit-autofill:hover,
[data-theme="dark"] textarea:-webkit-autofill:focus,
[data-theme="dark"] select:-webkit-autofill,
[data-theme="dark"] select:-webkit-autofill:hover,
[data-theme="dark"] select:-webkit-autofill:focus {
    -webkit-text-fill-color: var(--text-color) !important;
    -webkit-box-shadow: 0 0 0px 1000px var(--input-bg) inset !important;
    transition: background-color 5000s ease-in-out 0s;
}
